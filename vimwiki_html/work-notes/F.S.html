<!DOCTYPE html>
<html>
	<head>
		<title>F.S</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<link rel="Stylesheet" type="text/css" href="../style.css" />
		<script>var root_path = '../';</script>
		<!--<link href="http://github.com/ktmud/kwiki/commits/master.atom" rel="alternate" title="Kdmud Wiki 的最新更改" type="application/atom+xml" />-->
	</head>
	<body>
		<div id="all">
			<div id="header">
				<ul id="top-nav">
					<li>
					<a href="../index.html">Home</a>
					</li>
					<li>
					<a href="../tips/index.html" title="Sands to be hower, beads become sea.">Sands and Beads</a>
					</li>
					<li>
					<a href="../diary/diary.html">Trail of Heart</a>
					</li>
					<li>
					<a href="../work-notes/index.html">Work Notes</a>
					</li>
				</ul>
			</div>
			<div id="cse"></div>
			<div id="main">

				
<p>
<a href="index.html">Hame Page</a>
</p>

<h1>index</h1>
<div class="toc">
<ul>
<li><a href="#toc_0.0.1">problem while compiling android widget with ant</a>
<li><a href="#toc_0.0.2">solution to boot linux kernel only</a>
<li><a href="#toc_0.0.3">procedures of building android with different boot configurations</a>
</ul>
</ul>
</ul>
</div>

<p>
*********************************** 20110314 ***********************************<br>
</p>

<h3 id="toc_0.0.1">problem while compiling android widget with ant</h3>
<p>
-------------------- description --------------------<br>
</p>
<pre $ ant release}}}<br>>
( some thing worng with com.android.ant.AaptExecLoopTask )&lt;br&gt;
---------------------- solution ---------------------&lt;br&gt;
	This is caused by "android-sdk-linux_86",&lt;br&gt;
	Create a folder in "/opt/" named "android" and move folder &lt;br&gt;
"android-ndk-r4b" and "android-sdk-linux_86" into it.&lt;br&gt;
------------------------ end ------------------------&lt;br&gt;

=== problem while "ant device_setup" ===
-------------------- description --------------------&lt;br&gt;
some error info such as:&lt;br&gt;
[exec] error: insufficient permissions for device&lt;br&gt;

if connect the board's USB interface to PC, and do&lt;br&gt;
{{{
$ adb devices
There will be a device shown as:
????????????	no permissions
</pre>
<p>
---------------------- solution ---------------------<br>
</p>
<pre>
$ lsusb
...
Bus 004 Device 036: ID 0bb4:0c02 High Tech Computer Corp.
...
$ sudo gedit /etc/udev/rules.d/50-android.rules
(
add this line:
SUBSYSTEM=="usb", SYSFS{"High Tech Computer Corp."}=="0bb4", MODE="0666"
)
then,
$ sudo chmod a+rx /etc/udev/rules.d/50-android.rules
$ sudo /etc/init.d/udev restart
 * Stopping kernel event manager...                                      [ OK ] 
 * Starting kernel event manager...                                      [ OK ] 
$ cd /PATH_OF_ANDROID_SDK/tools/
$ sudo ./adb kill-server
$ sudo ./adb devices
* daemon not running. starting it now on port 5037 *
* daemon started successfully *
List of devices attached 
0123456789ABCDEF	device
</pre>
<p>
( Then try ant again and it shall be ok. )<br>
------------------------ end ------------------------<br>
</p>

<h3 id="toc_0.0.2">solution to boot linux kernel only</h3>
<p>
-------------------- description --------------------<br>
Sometimes we just need to boot linux kernel and run a shell.<br>
Mainly to modify file "init.rc" located in:<br>
"~/workspace/freescaleandroid/r91/device/fsl/imx5x/"<br>
Each time we build Android, this file will be put a copy in:<br>
"~/workspace/freescaleandroid/r91/out/target/product/imx51_bbg/root/"<br>
---------------------- solution ---------------------<br>
Comment off those services which support Android in "init.rc"<br>
In detail, we delete lines after this sentence:<br>
</p>
<pre>
#file: init.rc
...
service adbd /sbin/adbd
    disabled
...
#file
</pre>
<p>
------------------------ end ------------------------<br>
</p>

<p>
*********************************** 20110315 ***********************************<br>
</p>

<h3 id="toc_0.0.3">procedures of building android with different boot configurations</h3>
<p>
-------------------- description --------------------<br>
Sometimes we need to modify some default boot configurations such as<br>
boot kernel only, boot Android with a different default evironment variable, <br>
etc.<br>
---------------------- solution ---------------------<br>
So the simplest thing we need to do is to modify the file "init.rc"<br>
Then we build Android:<br>
</p>
<pre>
$ cd ~/myandroid
$ make PRODUCT-imx51_bbg-eng
$ cd ~myandroid/out/target/product/imx51_bbg
$ mkimage -A arm -O linux -T ramdisk -C none -a 0x90308000 -n
	"Android Root Filesystem" -d ./ramdisk.img ./uramdisk.img
</pre>
<p>
This procedure makes "ramdisk.img" then turn it into uramdisk.img.<br>
After that, we should use dd command to place it into SDCard:<br>
<code>$ sudo dd if=uramdisk.img of=/dev/sdb bs=4M seek=1</code><br>
The next and the last step is to boot system with SDCard and our config would <br>
	make sense.<br>
------------------------ end ------------------------<br>
</p>


			</div>
			<div id="footer">
				<p>Copyleft (C) <a href="http://localhost/about/">Librae</a> &nbsp;&nbsp; Driven by Vimwiki. Theme by <a href="http://ktmud.com">丘迟</a></p>
				<!--<p><a href="../SiteMap.html" title="站点地图">给我一点导航吧</a></p>-->
			</div>
		</div>
		<script src="../jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../vimwiki.js" type="text/javascript"></script>
	</body>
</html>
